{% extends "base.html" %}
{% block title %}Manage Assignments{% endblock %}
{% block content %}
<div class="row mb-4">
  <div class="col-12">
    <h2><i class="fas fa-file-alt me-2"></i>Manage Assignments</h2>
  </div>
</div>

<div class="row">
  <div class="col-lg-6 mb-4">
    <div class="card">
      <div class="card-header bg-primary text-white">Create Assignment</div>
      <div class="card-body">
        <form method="post">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <div class="mb-3">
            <label class="form-label">Title</label>
            <input type="text" name="title" class="form-control" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea name="description" class="form-control" rows="3"></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Class</label>
            <select name="class_id" class="form-select">
              <option value="">None</option>
              {% for c in classes %}
              <option value="{{ c.id }}">{{ c.name }} {{ c.section }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Subject</label>
            <select name="subject_id" class="form-select">
              <option value="">None</option>
              {% for s in subjects %}
              <option value="{{ s.id }}">{{ s.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Due Date</label>
            <input type="date" name="due_date" class="form-control">
          </div>
          <button class="btn btn-primary" type="submit">Create</button>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-6 mb-4">
    <div class="card">
      <div class="card-header bg-light">Recent Assignments</div>
      <div class="card-body">
        {% if assignments %}
        <ul class="list-group">
          {% for a in assignments %}
          <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <strong>{{ a.title }}</strong>
                <div class="text-muted small">Due: {{ a.due_date or 'N/A' }}</div>
              </div>
              <span class="badge bg-primary">{{ a.class_rel.name if a.class_rel else 'General' }}</span>
            </div>
            <div class="mt-2 text-muted">{{ a.description }}</div>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <div class="alert alert-info">No assignments yet.</div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}